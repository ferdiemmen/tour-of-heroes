
<div class="cms-columns cms-columns--column">
  <div class="cms-header">header</div>
  <div class="cms-columns__column scrollable--y">
    <div class="cms-preview cms-preview--article article">

      <div class="article__media cms__outline" (click)="setHeaderMedia()">
        <app-media-resized
          [media]="articleService.article.media"
          width="640"
          height="360"
          [crop]="articleService.article.headerCrop"></app-media-resized>
      </div>

      <medium-editor class="article__title" [(editorModel)]="articleService.article.title"
        [editorOptions]="{'disableReturn': true, 'toolbar': false}">
        <!-- [editorOptions]="{'disableReturn': true, 'toolbar': {'buttons': ['bold', 'italic', 'underline', 'h1', 'h2', 'h3']}}" -->
      </medium-editor>
      <medium-editor class="article__subtitle" [(editorModel)]="articleService.article.subtitle"
        [editorOptions]="{'disableReturn': true, 'toolbar': false}">
      </medium-editor>

      <ul id="snippets">
        <li class="snippet" *ngFor="let snippet of articleService.article.snippetsJson">
          <i class="fa fa-arrows handle" aria-hidden="true"></i>
          <app-snippet-header *ngIf="snippet.type === 'header'" [snippet]="snippet"></app-snippet-header>
          <app-snippet-paragraph *ngIf="snippet.type === 'paragraph'" [snippet]="snippet"></app-snippet-paragraph>
          <app-snippet-image *ngIf="snippet.type === 'image'" [snippet]="snippet"></app-snippet-image>
          <app-snippet-youtube *ngIf="snippet.type === 'youtube'" [snippet]="snippet"></app-snippet-youtube>
          <app-snippet-instagram *ngIf="snippet.type === 'instagram'" [snippet]="snippet"></app-snippet-instagram>
        </li>
      </ul>

      <pre>{{articleService.article|json}}</pre>
    </div>
  </div>
  <div class="cms-footer">
    <app-snippet-picker [snippets]="articleService.article.snippetsJson"></app-snippet-picker>
  </div>
</div>

<div class="cms-advanced">
  <pre>{{articleService.article|json}}</pre>
</div>

<div class="cms-editor">
  <div id="cms-tabs">
    <ul class="cms-tabs">
      <li class="cms-tabs__element" [ngClass]="{'active': tabIndex === 1}"><a href="javascript:void(0);" class="cms-tabs__toggle" (click)="tabIndex = 1">Basis</a></li>
      <!-- li class="cms-tabs__element" ngClass="{'active': tabIndex === 1}" ng-if="cmsConfig.hasProducts"><a href="javascript:void(0);" class="cms-tabs__toggle" (click)="tabIndex = 2">Producten</a></li -->
      <li class="cms-tabs__element" [ngClass]="{'active': tabIndex === 2}"><a href="javascript:void(0);" class="cms-tabs__toggle" (click)="tabIndex = 2">SEO {{articleService.article.seoScore}}%</a></li>
      <li class="cms-tabs__element" [ngClass]="{'active': tabIndex === 3}"><a href="javascript:void(0);" class="cms-tabs__toggle" (click)="tabIndex = 3">Publiceren</a></li>
    </ul>

    <div class="cms-tabs__content" *ngIf="tabIndex === 1">
      <label class="cms__label">Auteur</label>
      <select class="cms__select" name="author" [compareWith]="objectById" [(ngModel)]="articleService.article.author">
        <option *ngFor="let author of authorService.authors" [ngValue]="author">
          {{ author.username }}
        </option>
      </select>

      <label class="cms__label">Categorie</label>
      <select class="cms__select" name="category" [compareWith]="objectById" [(ngModel)]="articleService.article.category[0]">
        <option *ngFor="let category of categoryService.categories" [ngValue]="category">
          {{ category.name }}
        </option>
      </select>
    </div>

    <div class="cms-tabs__content" *ngIf="tabIndex === 3">

      <label class="cms__label">Status</label>
      <button class="cms__button cms__button--icon" [ngClass]="{'active': articleService.article.published}" (click)="articleService.article.published = !articleService.article.published">
        <span *ngIf="articleService.article.published"><i class="fa fa-check-circle" aria-hidden="true"></i> Gepubliceerd</span>
        <span *ngIf="!articleService.article.published"><i class="fa fa-clock-o" aria-hidden="true"></i> Concept</span>
      </button>

      <div class="cms-group">
        <div class="cms-group__item">
          <label class="cms__label">Publiceer datum</label>
          <input class="cms__input"
                [ngModel]="articleService.article.publishDate|date:'dd MM y H:mm'"
                [locale]="'nl'"
                [mode]="'dropdown'"
                [theme]="'#222628'"
                [autoClose]="true"
                [(dateTimePicker)]="articleService.article.publishDate" readonly />
        </div>

        <div class="cms-group__item">
          <label class="cms__label">Depubliceer datum</label>
          <input class="cms__input"
                [ngModel]="articleService.article.expiryDate|date:'dd MM y H:mm'"
                [locale]="'nl'"
                [mode]="'dropdown'"
                [theme]="'#222628'"
                [autoClose]="true"
                [(dateTimePicker)]="articleService.article.expiryDate" readonly />
        </div>
      </div>

      <hr class="cms__hr">

      <div class="cms-group">
        <div class="cms-group__item">
          <label class="cms__label">Uitgelicht?</label>
          <button class="cms__button cms__button--icon" [ngClass]="{'active': articleService.article.featured}" (click)="articleService.article.featured = !articleService.article.featured">
            <span *ngIf="articleService.article.featured"><i class="fa fa-check" aria-hidden="true"></i> Ja</span>
            <span *ngIf="!articleService.article.featured"><i class="fa fa-close" aria-hidden="true"></i> Nee</span>
          </button>
        </div>
      </div>

      <div class="cms-group">
        <div class="cms-group__item">
          <label class="cms__label">Partner bijdrage?</label>
          <button class="cms__button cms__button--icon" [ngClass]="{'active': articleService.article.isPartner}" (click)="articleService.article.isPartner = !articleService.article.isPartner">
            <span *ngIf="articleService.article.isPartner"><i class="fa fa-check" aria-hidden="true"></i> Ja</span>
            <span *ngIf="!articleService.article.isPartner"><i class="fa fa-close" aria-hidden="true"></i> Nee</span>
          </button>
        </div>

        <div class="cms-group__item">
          <label class="cms__label">Berichten tonen?</label>
          <button class="cms__button cms__button--icon" [ngClass]="{'active': articleService.article.showComments}" (click)="articleService.article.showComments = !articleService.article.showComments">
            <span *ngIf="articleService.article.showComments"><i class="fa fa-check" aria-hidden="true"></i> Ja</span>
            <span *ngIf="!articleService.article.showComments"><i class="fa fa-close" aria-hidden="true"></i> Nee</span>
          </button>
        </div>
      </div>

      <hr class="cms__hr">

      <label class="cms__label">Feeds</label>
      <label class="cms-checkbox" *ngFor="let feed of feedService.feeds" >
        <input class="cms-checkbox__element" type="checkbox" [checked]="articleService.hasProperty('RATable', feed)" (click)="articleService.toggleProperty('RATable', feed)">
        <span class="cms-checkbox__name">{{feed.name}}</span>
      </label>

      <label class="cms__label">Sites</label>
      <label class="cms-checkbox" *ngFor="let site of siteService.sites" >
        <input class="cms-checkbox__element" type="checkbox" [checked]="articleService.hasProperty('site', site)" (click)="articleService.toggleProperty('site', site)">
        <span class="cms-checkbox__name">{{site.name}}</span>
      </label>
    </div>

    <div class="cms-editor-actions">
      <button class="cms__button">Terug</button>
      <button class="cms__button active" (click)="save()">Opslaan</button>
      <button class="cms__button active" (click)="save(true)">Opslaan en opnieuw bewerken</button>
    </div>
  </div>
</div>